## **WHU社团信息门户Demo**

## 需求分析与概要设计

### 1.项目说明

#### 1.1.项目目标

本项目主要设计一个社团使用的信息门户，方便学生用户查看各个社团的简介、报名参加社团；社团管理者可以管理社团内的人事信息等。为实现以上功能，软件有以下需求：

**1** 每个使用信息门户的用户拥有自己的账户，可以更改自己的头像、邮箱、用户状态和ID；所有用户的信息存放在一个表中；

**2** 学生登录账户后，可以浏览社团信息，也可以报名参加社团；每一个社团单独的人事信息存放在一个表中；

**3** 亦可以通过多种筛选条件（社团名称、社团标签等）对现有的社团进行搜索；

**4** 同时社团管理员拥有自己的administrator账户，可以对社团中的人事信息表进行增、删、改操作，实现对社团成员的管理功能

**5** 社团管理员亦可给某个成员赋予管理员权限

**6** 每一个社团可以添加自己的标签，相同标签的社团可以聚簇管理。

**7** 每一个社团成员可以发布自己的活动，由管理员进行审核后方可发布

**8** 每一个社团可以管理自己的账户信息

#### 1.2.实用价值

本次大作业完成的是社团信息门户的demo，主要目的是搭建好框架、确定设计模式。后续可以在框架的基础上方便地扩充内容，最终的成品上线可以作为“武汉大学社团信息门户”。

#### 1.3.软硬件环境需求

操作系统：windows

数据库：目前仅考虑本机测试，所以数据库使用轻量化的sql server localDB即可

网络要求：.NetCore作为后端框架发布api，前端通过vue进行调用，理论上常规浏览器均可支持；基于Kubernetes实现服务器主机集群上的微服务架构（Demo中功能太少可能暂时不需要分开服务，但后续加入功能时可能会用到）；搭配istio作为服务网格、Kong作为API网关、fluxCD作为统一CD工具。

#### 1.4.使用的关键技术

使用.net框架下的c#语言进行编程，项目结构采用前后端分离的设计模式，后端采用ASP.NetCore 3.1编写并发布API，前端通过vue编写页面并进行调用。

持久层方面，数据库采用轻巧的sql server localDB构建，使用了微软提供的EntityFramework来精简对库操作。

架构方面，采取k8s作为基础设施，搭配istio作为服务网格、Kong作为API网关、fluxCD作为统一CD工具。

前后端协作方面，采用swagger编写api文档，实现完全的前后端分离。



### 2.需求分析

#### 2.1.系统用例

![用例图](https://github.com/AllenW1116/csharp_project/blob/main/%E7%94%A8%E4%BE%8B%E5%9B%BE%E3%80%81%E6%B5%81%E7%A8%8B%E5%9B%BE%E3%80%81%E7%B1%BB%E5%9B%BE%E3%80%81%E5%8A%9F%E8%83%BD%E5%9B%BE/%E7%A4%BE%E5%9B%A2%E4%BF%A1%E6%81%AF%E9%97%A8%E6%88%B7-%E7%94%A8%E4%BE%8B%E5%9B%BE.png)

从用户和管理员两个actor出发：

用户的用例就是注册登录后可以对自身账户信息进行编辑，可以报名参加社团，可以浏览社团活动，加入社团后可以发布活动；

管理员角度，管理员可以对注册在社团内的用户进行删除，也可以赋予\撤回一个用户的管理员权限；管理员可以对申请加入社团的用户进行审核，审核通过该用户方可成为社团成员；同时审核成员发布的活动（审核通过方可显示在页面上）。



#### 2.2.业务流程
以学生参加社团为例
![流程图](https://github.com/AllenW1116/imgplays/blob/master/%E7%A4%BE%E5%9B%A2%E6%B5%81%E7%A8%8B%E5%9B%BE.png)
### 3.概要设计

#### 3.1.功能模块设计

![功能图](https://github.com/AllenW1116/csharp_project/blob/main/%E7%94%A8%E4%BE%8B%E5%9B%BE%E3%80%81%E6%B5%81%E7%A8%8B%E5%9B%BE%E3%80%81%E7%B1%BB%E5%9B%BE%E3%80%81%E5%8A%9F%E8%83%BD%E5%9B%BE/%E7%A4%BE%E5%9B%A2%E4%BF%A1%E6%81%AF%E9%97%A8%E6%88%B7%20%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97.png)

**（1）**  **修改信息账户**

> > **输入**：用户的id、账号

> > **输出**：修改是否成功的提示

> > **功能概述**： 修改用户信息

**（2）**  **更新数据库**

> >**输入**：数据库操作请求

> > **输出**：修改是否成功的提示

> > **功能概述**： 将用户、社团等变更信息注册进库

**（3）**  **参加社团**

> >**输入**：选择的社团

> >**输出**：报名是否成功的提示

> > **功能概述**： 将新社团成员的信息注册进表（审核状态为未通过，此时用户还不是社团的成员）

**（4）**  **发布活动**（成员端）

> >**输入**：活动内容及标题

> >**输出**：申请发布是否成功的提示

> > **功能概述**： 将社团成员发布的活动注册进表（审核状态为未通过，此时活动还不能显示在页面上）

**（5）**  **审核成员**（管理员端）

> >**输入**：（首先读取当前成员表中状态为未审核的成员的视图）要通过审核的成员的ID

> >**输出**：无

> > **功能概述**： 申请的用户通过审核，正式成为社团成员  

**（6）**  **审核活动**（管理员端）

> >**输入**：（首先读取当前活动表中状态为未审核的活动的视图）要通过审核的活动的ID

> >**输出**：无

> > **功能概述**： 成员发布的活动通过审核，可以显示在页面上




> 小组成员

|  姓名  |     学号      |          分工          |
| :----: | :-----------: | :--------------------: |
|  林圳  | 2018300003070 | 架构设计、前端代码编写 |
| 魏心宇 | 2017301550063 | 模式设计、后端代码编写 |

 
 ### 4.前端原型设计
 ![1](https://github.com/AllenW1116/csharp_project/blob/main/%E5%89%8D%E7%AB%AF%E5%8E%9F%E5%9E%8B%E8%AE%BE%E8%AE%A1/%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%9E%8B1.png)
 ![2](https://github.com/AllenW1116/csharp_project/blob/main/%E5%89%8D%E7%AB%AF%E5%8E%9F%E5%9E%8B%E8%AE%BE%E8%AE%A1/%E5%89%8D%E7%AB%AF%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%9E%8B2.png)
 前后端分离采用swagger文档实现！

